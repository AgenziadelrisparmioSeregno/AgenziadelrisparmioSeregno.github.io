<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenzia del Risparmio | Next-Gen Energy</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-green: #39ff14;
            --bg-deep: #02060c;
            --surface: rgba(255, 255, 255, 0.05);
        }

        body {
            background-color: var(--bg-deep);
            color: white;
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow-x: hidden;
        }

        h1, h2, .tech-font { font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 2px; }

        /* Sfondo Animato 3D Mesh */
        .bg-mesh {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(45deg, #02060c 25%, #05101c 50%, #02060c 75%);
            z-index: -1; opacity: 0.5;
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 40px; }

        /* HERO SECTION CON BOT CENTRALE */
        .hero-ai {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
            min-height: 80vh;
        }

        .ai-core {
            position: relative;
            background: radial-gradient(circle, rgba(0, 243, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            padding: 40px;
            border: 1px solid var(--surface);
            box-shadow: 0 0 50px rgba(0,0,0,1);
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            border: 1px solid var(--neon-green);
            color: var(--neon-green);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

        /* BOT CHAT BOX INTERNA */
        .chat-container {
            background: var(--surface);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 30px;
            height: 500px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0, 243, 255, 0.05);
        }

        .chat-messages { flex: 1; padding: 25px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }

        .msg { padding: 15px 20px; border-radius: 15px; max-width: 80%; font-size: 0.95rem; line-height: 1.5; }
        .bot-msg { background: rgba(0, 243, 255, 0.1); border-left: 4px solid var(--neon-blue); align-self: flex-start; }
        .user-msg { background: var(--surface); align-self: flex-end; border-right: 4px solid var(--neon-green); }

        /* COMPARATORE ALGORITMICO */
        .comparison-engine {
            display: none;
            margin-top: 50px;
            background: #000;
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--neon-blue);
        }

        .offer-card {
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px; border-bottom: 1px solid var(--surface);
            transition: 0.3s;
        }

        .offer-card.our-choice {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.05), transparent);
            border-left: 4px solid var(--neon-blue);
        }

        .btn-action {
            background: var(--neon-blue); color: #000; padding: 12px 25px;
            border-radius: 8px; font-weight: bold; cursor: pointer; border: none;
            transition: 0.3s;
        }

        .btn-action:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--neon-blue); }

        .consultant-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .consultant-btn {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: white; padding: 15px; border-radius: 15px; cursor: pointer; transition: 0.3s;
        }
        .consultant-btn:hover { background: var(--surface); border-color: var(--neon-blue); }

    </style>
</head>
<body>

<div class="bg-mesh"></div>

<div class="container">
    <div class="hero-ai">
        <div>
            <div class="status-badge">SISTEMA DI COMPARAZIONE ATTIVO V2.0</div>
            <h1 style="font-size: 3.5rem;">Risparmio <span style="color: var(--neon-blue);">Intelligente</span></h1>
            <p style="font-size: 1.1rem; color: #a0aab8; margin-bottom: 30px;">
                Il primo algoritmo 3D che confronta le tariffe Luce e Gas in tempo reale. 
                Scegli un consulente o lascia che l'AI trovi la tua offerta.
            </p>
            
            <div class="consultant-grid">
                <button class="consultant-btn" onclick="selectConsultant('Daniel')">üë®‚Äçüíº DANIEL <br><small>Energy Specialist</small></button>
                <button class="consultant-btn" onclick="selectConsultant('Daniele')">üë®‚Äçüíº DANIELE <br><small>Tech Advisor</small></button>
                <button class="consultant-btn" onclick="selectConsultant('Andrea')">üë®‚Äçüíº ANDREA <br><small>Solar Expert</small></button>
                <button class="consultant-btn" onclick="selectConsultant('Luca')">üë®‚Äçüíº LUCA <br><small>Tax & CAF</small></button>
            </div>
            
            <button class="btn-action" style="width: 100%; margin-top: 20px; background: transparent; border: 1px solid var(--neon-green); color: var(--neon-green);" onclick="startAuto()">
                AVVIA COMPARATORE AUTONOMO
            </button>
        </div>

        <div class="ai-core">
            <div class="chat-container">
                <div class="chat-messages" id="chatbox">
                    <div class="msg bot-msg">
                        Sistemi pronti. Sono l'intelligenza collettiva dell'Agenzia del Risparmio. 
                        Come posso guidarti oggi?
                    </div>
                </div>
                <div style="padding: 20px; border-top: 1px solid var(--surface); display: flex; gap: 10px;">
                    <input type="text" id="userInput" placeholder="Chiedi qualsiasi cosa..." style="flex:1; background:transparent; border:none; color:white; outline:none;">
                    <button class="btn-action" onclick="userSendMessage()">INVIO</button>
                </div>
            </div>
        </div>
    </div>

    <div id="engine" class="comparison-engine">
        <h2 style="margin-bottom: 20px; color: var(--neon-blue);">Comparazione in tempo reale</h2>
        <div id="results-list"></div>
    </div>
</div>

<script>
    const chatbox = document.getElementById('chatbox');

    function addMsg(text, type) {
        const div = document.createElement('div');
        div.className = `msg ${type}-msg`;
        div.innerHTML = text;
        chatbox.appendChild(div);
        chatbox.scrollTop = chatbox.scrollHeight;
    }

    function selectConsultant(name) {
        addMsg(`Voglio parlare con ${name}`, 'user');
        setTimeout(() => {
            addMsg(`üö® <strong>ANALISI STATO:</strong> ${name} √® attualmente impegnato in una consulenza privata.`, 'bot');
            addMsg(`Per non farti perdere tempo, posso analizzare io i tuoi consumi ora, oppure posso prenotarti il primo slot libero con lui. Cosa preferisci?`, 'bot');
        }, 800);
    }

    function startAuto() {
        addMsg("Avvio Algoritmo di Comparazione...", 'bot');
        document.getElementById('engine').style.display = 'block';
        
        const offers = [
            { name: "La Nostra Migliore (Partner)", price: "68‚Ç¨", our: true, note: "Punteggio Trasparenza 10/10" },
            { name: "Competitor Nazionale A", price: "92‚Ç¨", our: false, note: "Costi fissi elevati" },
            { name: "La Nostra Eco (Partner)", price: "71‚Ç¨", our: true, note: "100% Green + Assistenza" },
            { name: "Competitor Nazionale B", price: "105‚Ç¨", our: false, note: "Prezzo variabile rischioso" }
        ];

        const list = document.getElementById('results-list');
        list.innerHTML = "";
        
        offers.sort((a,b) => (a.our === b.our)? 0 : a.our? -1 : 1);

        offers.forEach((o, i) => {
            setTimeout(() => {
                const card = document.createElement('div');
                card.className = `offer-card ${o.our ? 'our-choice' : ''}`;
                card.innerHTML = `
                    <div>
                        <span style="color:${o.our ? 'var(--neon-blue)' : '#777'}">${o.our ? '‚≠ê CONSIGLIATA' : 'OFFERTA ESTERNA'}</span>
                        <div style="font-size: 1.2rem; font-weight: bold;">${o.name}</div>
                        <small style="color:#aaa">${o.note}</small>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 1.8rem; font-weight: bold; color:${o.our ? 'var(--neon-green)' : 'white'}">${o.price}</div>
                        <button class="btn-action" style="padding: 5px 15px; font-size: 0.8rem;">Dettagli</button>
                    </div>
                `;
                list.appendChild(card);
            }, i * 400);
        });
    }

    function userSendMessage() {
        const input = document.getElementById('userInput');
        if(input.value) {
            addMsg(input.value, 'user');
            input.value = "";
            setTimeout(() => addMsg("Sto elaborando la tua richiesta attraverso i nostri database...", "bot"), 1000);
        }
    }
</script>

</body>
</html>
