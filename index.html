<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenzia del Risparmio | Next-Gen Energy</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-green: #39ff14;
            --bg-deep: #02060c;
            --surface: rgba(255, 255, 255, 0.05);
        }

        body { background-color: var(--bg-deep); color: white; font-family: 'Inter', sans-serif; margin: 0; overflow-x: hidden; }
        h1, h2, .tech-font { font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 2px; }
        
        .bg-mesh { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, #02060c 25%, #05101c 50%, #02060c 75%); z-index: -1; opacity: 0.5; }
        .container { max-width: 1400px; margin: 0 auto; padding: 40px; }

        .hero-ai { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: center; min-height: 85vh; }
        .status-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; border: 1px solid var(--neon-green); color: var(--neon-green); margin-bottom: 20px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

        /* CHAT INTERFACE 3D */
        .chat-container { background: var(--surface); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); border-radius: 30px; height: 550px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .chat-messages { flex: 1; padding: 25px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .msg { padding: 15px 20px; border-radius: 15px; max-width: 85%; font-size: 0.95rem; line-height: 1.5; position: relative; }
        .bot-msg { background: rgba(0, 243, 255, 0.1); border-left: 4px solid var(--neon-blue); align-self: flex-start; }
        .user-msg { background: var(--surface); align-self: flex-end; border-right: 4px solid var(--neon-green); }

        /* BUTTONS */
        .btn-action { background: var(--neon-blue); color: #000; padding: 12px 25px; border-radius: 8px; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; text-decoration: none; display: inline-block; margin-top: 10px; text-align: center; }
        .btn-action:hover { transform: translateY(-2px); box-shadow: 0 0 20px var(--neon-blue); }
        
        .consultant-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 25px; }
        .consultant-btn { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); color: white; padding: 15px; border-radius: 15px; cursor: pointer; transition: 0.3s; text-align: left; }
        .consultant-btn:hover { border-color: var(--neon-blue); background: rgba(0, 243, 255, 0.05); }

        /* COMPARISON AREA */
        .comparison-engine { display: none; margin-top: 50px; background: rgba(0,0,0,0.8); padding: 30px; border-radius: 25px; border: 1px solid var(--neon-blue); animation: fadeIn 0.8s; }
        .offer-card { display: flex; justify-content: space-between; align-items: center; padding: 25px; border-bottom: 1px solid var(--surface); }
        .our-choice { background: linear-gradient(90deg, rgba(0, 243, 255, 0.08), transparent); border-left: 5px solid var(--neon-green); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="bg-mesh"></div>

<div class="container">
    <div class="hero-ai">
        <div>
            <div class="status-badge">ALGORITMO COMPARATIVO ONLINE</div>
            <h1 style="font-size: 3.2rem;">Agenzia del <span style="color: var(--neon-blue);">Risparmio</span></h1>
            <p style="color: #a0aab8; margin-bottom: 30px;">
                Assistenza Premium per <b>Luce, Gas, Fotovoltaico e CAF</b>. 
                Scegli il tuo consulente dedicato o confronta le tariffe in autonomia.
            </p>
            
            <div class="consultant-grid">
                <button class="consultant-btn" onclick="selectAgent('Daniel', '3423218269')">üë®‚Äçüíº DANIEL <br><small>Energy Manager</small></button>
                <button class="consultant-btn" onclick="selectAgent('Daniele', '3491795387')">üë®‚Äçüíº DANIELE <br><small>Tech Specialist</small></button>
                <button class="consultant-btn" onclick="selectAgent('Andrea', '3515910955')">üë®‚Äçüíº ANDREA <br><small>Solar Expert</small></button>
                <button class="consultant-btn" onclick="selectAgent('Luca', '3277545377')">üë®‚Äçüíº LUCA <br><small>CAF & Fiscal</small></button>
            </div>
            
            <button class="btn-action" style="width: 100%; margin-top: 20px; background: transparent; border: 1px solid var(--neon-green); color: var(--neon-green);" onclick="startComparison()">
                AVVIA COMPARAZIONE AUTONOMA
            </button>
        </div>

        <div class="ai-box">
            <div class="chat-container">
                <div class="chat-messages" id="chatbox">
                    <div class="msg bot-msg">
                        Benvenuto nell'area riservata. Sono l'AI di Agenzia del Risparmio. <br><br>
                        Posso aiutarti a confrontare le offerte o metterti in contatto con il team. Con chi desideri parlare?
                    </div>
                </div>
                <div style="padding: 20px; border-top: 1px solid var(--surface); display: flex; gap: 10px;">
                    <input type="text" id="userInput" placeholder="Chiedi assistenza..." style="flex:1; background:transparent; border:none; color:white; outline:none;">
                    <button class="btn-action" onclick="handleInput()" style="margin:0; padding: 10px 20px;">INVIA</button>
                </div>
            </div>
        </div>
    </div>

    <div id="engine" class="comparison-engine">
        <h2 style="margin-bottom: 25px;">Analisi Tariffe 2026</h2>
        <div id="results"></div>
    </div>
</div>

<script>
    const chatbox = document.getElementById('chatbox');

    function addMessage(text, side) {
        const div = document.createElement('div');
        div.className = `msg ${side}-msg`;
        div.innerHTML = text;
        chatbox.appendChild(div);
        chatbox.scrollTop = chatbox.scrollHeight;
    }

    // LOGICA CONSULENTI
    function selectAgent(name, phone) {
        addMessage(`Vorrei parlare con ${name}`, 'user');
        setTimeout(() => {
            addMessage(`üö® <b>NOTIFICA SISTEMA:</b> ${name} √® attualmente in consulenza con un altro cliente.`, 'bot');
            addMessage(`Per non attendere, puoi scrivergli direttamente su WhatsApp. Ti risponder√† appena termina l'appuntamento: <br><br> <a href="https://wa.me/39${phone}?text=Ciao%20${name},%20ho%20bisogno%20di%20consulenza%20dal%20sito" class="btn-action" target="_blank">CONTATTA ${name.toUpperCase()}</a>`, 'bot');
        }, 800);
    }

    // ALGORITMO COMPARAZIONE (Tipo Switcho/Billoo)
    function startComparison() {
        addMessage("Avvio analisi dei mercati in corso...", 'bot');
        document.getElementById('engine').style.display = 'block';
        window.scrollTo({ top: document.getElementById('engine').offsetTop - 50, behavior: 'smooth' });

        const offers = [
            { name: "Partner: Risparmio Sicuro Gold", price: "64‚Ç¨", our: true, info: "Tariffa riservata Agenzia - Assistenza Diretta" },
            { name: "Enel Flex (Stima)", price: "89‚Ç¨", our: false, info: "Costi di commercializzazione standard" },
            { name: "Partner: Green Power 100%", price: "67‚Ç¨", our: true, info: "Energia certificata + Tutor dedicato" },
            { name: "Plenitude Trend (Stima)", price: "95‚Ç¨", our: false, info: "Prezzo variabile di mercato" }
        ];

        const list = document.getElementById('results');
        list.innerHTML = "";

        offers.forEach((o, i) => {
            setTimeout(() => {
                const card = document.createElement('div');
                card.className = `offer-card ${o.our ? 'our-choice' : ''}`;
                card.innerHTML = `
                    <div>
                        <b style="color:${o.our ? 'var(--neon-green)' : 'white'}">${o.our ? '‚≠ê LA NOSTRA SCELTA' : 'OFFERTA MERCATO'}</b>
                        <div style="font-size:1.3rem; margin: 5px 0;">${o.name}</div>
                        <small style="color:#777">${o.info}</small>
                    </div>
                    <div style="text-align:right">
                        <div style="font-size:2rem; font-weight:bold;">${o.price}<span style="font-size:0.8rem">/mese</span></div>
                        <button class="btn-action" onclick="addMessage('Ottima scelta! Un consulente verificher√† la fattibilit√† tecnica.', 'bot')">ATTIVA ORA</button>
                    </div>
                `;
                list.appendChild(card);
            }, i * 500);
        });
    }

    function handleInput() {
        const input = document.getElementById('userInput');
        if(!input.value) return;
        addMessage(input.value, 'user');
        const val = input.value.toLowerCase();
        input.value = "";

        setTimeout(() => {
            if(val.includes("caf")) addMessage("Per i servizi CAF (ISEE, 730, Bonus), ti collego con Luca, il nostro esperto fiscale.", "bot");
            else if(val.includes("fote") || val.includes("solare")) addMessage("Per il fotovoltaico, Andrea analizzer√† il tuo tetto tramite satellite. Clicca sul suo profilo.", "bot");
            else addMessage("Ricevuto. Sto elaborando la tua richiesta nei nostri database...", "bot");
        }, 1000);
    }
</script>

</body>
</html>
