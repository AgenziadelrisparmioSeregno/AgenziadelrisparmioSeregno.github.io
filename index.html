<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADR | Agenzia del Risparmio Seregno</title>
    
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="logo.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css?v=1.2">

</head>
<body>

    <div id="progress-container"><div id="progress-bar"></div></div>

    <div class="market-ticker">
        <div class="ticker-content">
            <span class="ticker-item">‚ö° LUCE PUN: 0.123 ‚Ç¨/kWh</span>
            <span class="ticker-item">üî• GAS PSV: 0.328 ‚Ç¨/smc</span>
            <span class="ticker-item">üì± FIBRA: 2.5GB ATTIVA</span>
            <span class="ticker-item">üìâ TREND: RISPARMIO ATTIVO 2026</span>
            <span class="ticker-item">‚ö° LUCE PUN: 0.123 ‚Ç¨/kWh</span>
        </div>
    </div>

    <nav>
        <a href="index.html"><img src="logo.png" alt="ADR Logo" class="nav-logo"></a>
        <div class="nav-links">
            <a href="index.html" class="active">HOME</a>
            <a href="telefonia.html">TELEFONIA</a>
            <a href="fotovoltaico.html">FOTOVOLTAICO</a>
            <a href="caf.html">CAF</a>
            <a href="contatti.html">CONTATTI</a>
        </div>
        <a href="dashboard.html" class="area-clienti-btn">AREA CLIENTI</a>
    </nav>

    <div class="container">
        <header style="text-align: center; margin: 60px 0;" class="reveal">
            <h1 class="tech-font" style="font-size: 2.5rem; margin-top: 10px;">AGENZIA DEL <span style="color:var(--adr-blue)">RISPARMIO</span></h1>
            <p style="color: #666; font-weight: 300;">Consulenza Energetica e Digitale Avanzata a Seregno</p>
        </header>

        <div class="glass-card reveal">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 40px; align-items: center;">
                <div>
                    <h3 class="tech-font">Scanner Bolletta IA</h3>
                    <div id="ui-home-default">
                        <input type="file" id="file-input-home" style="display: none;" onchange="eseguiScansioneHome()">
                        <button class="btn" onclick="document.getElementById('file-input-home').click()">CARICA PDF BOLLETTA</button>
                        <p style="text-align: center; font-size: 0.6rem; color: #555; margin: 10px 0;">OPPURE</p>
                        <button class="btn btn-andrea" onclick="vaiWhatsApp('Andrea', 'consulenza_generale')">PRENOTA CONSULENZA GRATUITA</button>
                    </div>

                    <div id="ui-home-risultato" style="display: none; text-align: center;">
                        <div class="grade-circle">4</div>
                        <p class="tech-font" style="color:#ff4444; font-size: 0.7rem; margin-bottom: 15px;">VOTO INSUFFICIENTE</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <button class="btn" onclick="vaiWhatsApp('Daniel', 'bolletta')">DANIEL</button>
                            <button class="btn" onclick="vaiWhatsApp('Daniele', 'bolletta')">DANIELE</button>
                            <button class="btn" onclick="vaiWhatsApp('Luca', 'bolletta')">LUCA</button>
                            <button class="btn btn-andrea" onclick="vaiWhatsApp('Andrea', 'bolletta')">ANDREA</button>
                        </div>
                    </div>
                </div>

                <div id="drop-zone" onclick="document.getElementById('file-input-home').click()">
                    <p id="label-home" style="font-size: 0.75rem; color: #666;">
                        <span style="font-size: 2.5rem; display: block; margin-bottom: 10px;">üìÑ</span>
                        <b style="color: var(--adr-blue)">CLICCA</b> PER ANALIZZARE PDF
                    </p>
                </div>
            </div>
        </div>

        <div class="reveal" style="margin-top: 80px;">
            <h2 class="tech-font" style="text-align: center; font-size: 1rem; color: #666; margin-bottom: 10px;">Collaboriamo con i <span style="color: var(--adr-blue)">Migliori Brand</span></h2>
            <div class="partner-container">
                <div class="partner-track">
                    <img src="logo-acea.png" class="partner-logo" alt="Acea">
                    <img src="logo-hera.png" class="partner-logo" alt="Hera">
                    <img src="logo-eon.png" class="partner-logo" alt="Eon">
                    <img src="logo-enel.png" class="partner-logo" alt="Enel">
                    <img src="logo-audax.png" class="partner-logo" alt="Audax">
                    <img src="logo-bluenergy.png" class="partner-logo" alt="Bluenergy">
                    <img src="logo-segnoverde.png" class="partner-logo" alt="Segnoverde">
                    <img src="logo-fastweb-energia.png" class="partner-logo" alt="Fastweb Energia">
                </div>
            </div>
        </div>

        <section class="reveal" style="margin: 80px 0;">
            <h2 class="tech-font" style="text-align: center; color: var(--adr-blue); margin-bottom: 50px;">Specialisti <span style="color:#333">Operativi</span></h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                
                <div class="glass-card" style="text-align: center; border-bottom: 3px solid var(--adr-green);">
                    <div style="font-size: 2.5rem; margin-bottom: 15px;">üë®‚Äçüíº</div>
                    <h4 class="tech-font" style="font-size: 0.9rem;">ANDREA</h4>
                    <p style="font-size: 0.6rem; color: #888; margin-bottom: 15px;">RESPONSABILE CAF & CONSULENTE ENERGETICO</p>
                    <button class="btn btn-andrea" onclick="vaiWhatsApp('Andrea', 'appuntamento')">PRENOTA APPUNTAMENTO</button>
                </div>

                <div class="glass-card" style="text-align: center; border-bottom: 3px solid var(--adr-blue);">
                    <div style="font-size: 2.5rem; margin-bottom: 15px;">‚ö°</div>
                    <h4 class="tech-font" style="font-size: 0.9rem;">DANIEL</h4>
                    <p style="font-size: 0.6rem; color: #888; margin-bottom: 15px;">CONSULENTE LUCE E GAS & TEL</p>
                    <button class="btn" onclick="vaiWhatsApp('Daniel', 'consulenza')">RICHIEDI CONSULENZA</button>
                </div>

                <div class="glass-card" style="text-align: center; border-bottom: 3px solid var(--adr-blue);">
                    <div style="font-size: 2.5rem; margin-bottom: 15px;">üì°</div>
                    <h4 class="tech-font" style="font-size: 0.9rem;">DANIELE</h4>
                    <p style="font-size: 0.6rem; color: #888; margin-bottom: 15px;">CONSULENTE LUCE E GAS & TEL</p>
                    <button class="btn" onclick="vaiWhatsApp('Daniele', 'consulenza')">RICHIEDI CONSULENZA</button>
                </div>

                <div class="glass-card" style="text-align: center; border-bottom: 3px solid var(--adr-blue);">
                    <div style="font-size: 2.5rem; margin-bottom: 15px;">‚òÄÔ∏è</div>
                    <h4 class="tech-font" style="font-size: 0.9rem;">LUCA</h4>
                    <p style="font-size: 0.6rem; color: #888; margin-bottom: 15px;">CONSULENTE LUCE E GAS & FOTOVOLTAICO</p>
                    <button class="btn" onclick="vaiWhatsApp('Luca', 'consulenza')">RICHIEDI CONSULENZA</button>
                </div>

            </div>
        </section>
    </div>

    <div id="bot-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
        <div id="bot-launcher" onclick="toggleBot()" style="width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 2rem;">ü§ñ</div>
        <div id="bot-window">
           async function inviaMessaggioBot() {
    const input = document.getElementById('user-input');
    const msgContainer = document.getElementById('bot-messages');
    const testoUtente = input.value.trim();

    if (testoUtente === "") return;

    // Mostra messaggio utente
    msgContainer.innerHTML += `<div style="align-self: flex-end; background: var(--adr-blue); color: white; padding: 10px; border-radius: 15px; margin-bottom: 10px; font-size: 0.85rem; max-width: 80%;">${testoUtente}</div>`;
    input.value = "";
    msgContainer.scrollTop = msgContainer.scrollHeight;

    // Effetto "ADR sta pensando..."
    const typingId = "typing-" + Date.now();
    msgContainer.innerHTML += `<div id="${typingId}" style="align-self: flex-start; background: #f0f0f0; padding: 10px; border-radius: 15px; margin-bottom: 10px; font-size: 0.8rem;">ADR-1 sta analizzando...</div>`;

    try {
        // Cerchiamo la risposta tramite un servizio di AI (es. DuckDuckGo AI o un Worker gratuito)
        // Qui usiamo una logica che simula l'accesso a un database di conoscenza globale
        const response = await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(testoUtente)}&format=json&no_html=1`);
        const data = await response.json();
        
        let rispostaFinale = "";

        if (data.AbstractText) {
            // Se trova una risposta su internet (Wikipedia/Fonti ufficiali)
            rispostaFinale = data.AbstractText;
        } else {
            // Se √® una domanda specifica su ADR o non trova risultati certi
            rispostaFinale = await generaRispostaIntelligente(testoUtente);
        }

        // Rimuovi "sta pensando" e metti la risposta
        document.getElementById(typingId).remove();
        msgContainer.innerHTML += `
            <div style="align-self: flex-start; background: #fff; border: 1px solid #eee; padding: 12px; border-radius: 15px; margin-bottom: 10px; font-size: 0.85rem; max-width: 85%; border-left: 4px solid var(--adr-blue); box-shadow: 5px 5px 15px rgba(0,0,0,0.05);">
                ${rispostaFinale}
                <div style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px;">
                    <p style="font-size: 0.7rem; color: #888;">Ti √® servito? Se vuoi un'analisi tecnica della tua bolletta specifica:</p>
                    <button class="btn btn-andrea" style="font-size: 0.6rem; padding: 5px;" onclick="vaiWhatsApp('Andrea', 'consulenza')">PARLA CON ANDREA</button>
                </div>
            </div>`;

    } catch (error) {
        document.getElementById(typingId).innerText = "Sospensione momentanea del segnale. Ti consiglio di contattare i nostri specialisti direttamente.";
    }
    msgContainer.scrollTop = msgContainer.scrollHeight;
}

// Funzione di supporto per risposte ADR specifiche
async function generaRispostaIntelligente(testo) {
    const t = testo.toLowerCase();
    if (t.includes("costo") || t.includes("pagare")) return "La consulenza ADR √® gratuita per i cittadini di Seregno. Analizziamo i tuoi costi e troviamo l'offerta migliore senza costi di agenzia.";
    if (t.includes("dove") || t.includes("sede")) return "Siamo a Seregno! Puoi scriverci su WhatsApp per ricevere la posizione esatta e fissare un incontro.";
    return "Ottima domanda. In base alle attuali normative del mercato energetico 2026, la situazione √® in evoluzione. Per darti un dato preciso sulla tua zona, preferirei farti parlare con un consulente tecnico.";
}
        </div>
    </div>

    <footer style="margin-top: 100px; padding: 40px; border-top: 1px solid #eee; text-align: center;">
        <p style="font-size: 0.6rem; color: #aaa;">¬© 2026 ADR SEREGNO - SISTEMA DI RISPARMIO CERTIFICATO</p>
    </footer>

    <script>
        // Animazione Reveal
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = "1";
                    entry.target.style.transform = "translateY(0)";
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach((el) => observer.observe(el));

        // Scanner Bolletta
        function eseguiScansioneHome() {
            const file = document.getElementById('file-input-home').files[0];
            if (file) {
                document.getElementById('label-home').innerHTML = "<span style='color:var(--adr-green)'>ANALISI IN CORSO...</span><br>" + file.name;
                setTimeout(() => {
                    document.getElementById('ui-home-default').style.display = "none";
                    document.getElementById('ui-home-risultato').style.display = "block";
                }, 2000);
            }
        }

        // WhatsApp Redirect
        function vaiWhatsApp(agente, motivo) {
            const numeri = { 'Daniel': '393423218269', 'Daniele': '393491795387', 'Luca': '393277545377', 'Andrea': '393515910955' };
            let messaggio = "";
            switch(motivo) {
                case 'consulenza_generale': messaggio = `Ciao, vorrei prenotare una consulenza gratuita per le mie utenze.`; break;
                case 'bolletta': messaggio = `Ciao ${agente}, il mio voto bolletta √® INSUFFICIENTE. Mi aiuti a risparmiare?`; break;
                case 'appuntamento': messaggio = `Buongiorno Andrea, vorrei fissare un appuntamento in sede a Seregno.`; break;
                default: messaggio = `Ciao, vorrei ricevere assistenza professionale ADR.`;
            }
            window.open(`https://wa.me/${numeri[agente]}?text=${encodeURIComponent(messaggio)}`, '_blank');
        }

        function toggleBot() {
            const win = document.getElementById('bot-window');
            win.style.display = (win.style.display === 'none' || win.style.display === '') ? 'flex' : 'none';
        }

        window.onscroll = function() {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = (winScroll / height) * 100;
            document.getElementById("progress-bar").style.width = scrolled + "%";
        };
    </script>
    <a href="tel:+393515910955" class="mobile-call-btn">üìû</a>
</body>
</html>
