<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fotovoltaico | Agenzia del Risparmio</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* FAQ & REVEAL ANIMATIONS */
        .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        .faq-item {
            background: rgba(255,255,255,0.02);
            border: 1px solid #222;
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: 0.3s;
            overflow: hidden;
        }
        .faq-item:hover { border-color: var(--neon-green); }
        .faq-question {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            font-family: 'Orbitron';
            font-size: 0.8rem;
            color: var(--neon-green);
        }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.3s ease;
            padding: 0 20px;
            color: #aaa;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .faq-item.active .faq-answer {
            max-height: 200px;
            padding: 10px 20px 20px 20px;
        }

        /* Calcolatore Style */
        #calc-spesa {
            width: 100%;
            background: #111;
            border: 1px solid #333;
            padding: 12px;
            color: white;
            border-radius: 5px;
            outline: none;
            font-family: 'Inter';
        }
        #calc-spesa:focus { border-color: var(--neon-green); }
    </style>
</head>
<body>

    <div id="progress-container"><div id="progress-bar"></div></div>

    <div class="market-ticker">
        <div class="ticker-content">
            <span class="ticker-item">‚ö° LUCE PUN: <span style="color:var(--neon-green)">0.118 ‚Ç¨/kWh ‚ñº</span></span>
            <span class="ticker-item">üî• GAS PSV: <span style="color:var(--neon-red)">0.425 ‚Ç¨/smc ‚ñ≤</span></span>
            <span class="ticker-item">‚òÄÔ∏è FOTOVOLTAICO: <span style="color:var(--neon-blue)">INCENTIVI 50% ATTIVI</span></span>
            <span class="ticker-item">üîã ACCUMULO: <span style="color:var(--neon-green)">TECNOLOGIA LFP 2026</span></span>
            <span class="ticker-item">‚ö° LUCE PUN: 0.118 ‚Ç¨/kWh ‚ñº</span>
            <span class="ticker-item">üî• GAS PSV: 0.425 ‚Ç¨/smc ‚ñ≤</span>
        </div>
    </div>

    <nav>
        <div class="nav-links">
            <a href="index.html">HOME</a>
            <a href="telefonia.html">TELEFONIA & SKY</a>
            <a href="fotovoltaico.html" class="active">FOTOVOLTAICO</a>
            <a href="contatti.html">CONTATTI</a>
        </div>
        <a href="dashboard.html" class="area-clienti-btn">AREA CLIENTI</a>
    </nav>

    <div class="container">
        <header style="text-align: center; margin: 60px 0;">
            <h1 class="tech-font" style="font-size: 2.2rem; color: var(--neon-green);">Indipendenza <span style="color:white">Energetica</span></h1>
            <p style="color: #888; max-width: 700px; margin: 0 auto;">Produci la tua energia, abbatti le bollette e aumenta il valore della tua casa con le migliori tecnologie solari del 2026.</p>
        </header>

        <div class="glass-card reveal" style="margin-bottom: 40px; border-left: 4px solid var(--neon-green); background: rgba(0, 255, 157, 0.02);">
            <div style="display: flex; flex-wrap: wrap; align-items: center; gap: 30px;">
                <div style="flex: 2; min-width: 280px;">
                    <h3 class="tech-font" style="font-size: 1.1rem; color: var(--neon-green);">Sopralluogo Tecnico Gratuito</h3>
                    <p style="font-size: 0.9rem; color: #ccc; margin-top: 10px;">
                        I nostri consulenti valutano l'esposizione e il fabbisogno per un piano di rientro personalizzato.
                    </p>
                </div>
                <div style="flex: 1; min-width: 240px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button class="btn btn-green" onclick="contactAgent('Daniel', 'Fotovoltaico')">Daniel</button>
                    <button class="btn btn-green" onclick="contactAgent('Daniele', 'Fotovoltaico')">Daniele</button>
                    <button class="btn btn-green" onclick="contactAgent('Luca', 'Fotovoltaico')">Luca</button>
                    <button class="btn btn-green" style="background: var(--neon-green); color: black;" onclick="contactAgent('Andrea', 'Fotovoltaico')">Andrea</button>
                </div>
            </div>
        </div>

        <div class="glass-card reveal" style="margin: 60px 0; border-top: 1px solid var(--neon-green); background: rgba(0, 255, 157, 0.05);">
            <h3 class="tech-font" style="font-size: 1rem; color: var(--neon-green); text-align: center;">Simulatore di Risparmio ADR</h3>
            <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; justify-content: center; align-items: center;">
                <div style="flex: 1; min-width: 200px;">
                    <label style="font-size: 0.7rem; color: #666;">Spesa elettrica annua (‚Ç¨)</label>
                    <input type="number" id="calc-spesa" placeholder="Es: 1200">
                </div>
                <div style="flex: 1; min-width: 200px; text-align: center;">
                    <p style="font-size: 0.7rem; color: #666; margin-bottom: 5px;">Risparmio stimato (20 anni)</p>
                    <div id="calc-result" style="font-family: 'Orbitron'; color: var(--neon-green); font-size: 1.5rem;">‚Ç¨ 0</div>
                </div>
                <button class="btn btn-green" onclick="calculateSavings()" style="height: 45px;">CALCOLA ORA</button>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;">
            <div class="glass-card reveal">
                <h4 class="tech-font" style="color: var(--neon-green); font-size: 0.9rem;">Pannelli High-Tech</h4>
                <p style="font-size: 0.85rem; color: #aaa; margin-top: 10px;">Moduli monocristallini ad alta efficienza con garanzia di rendimento 25 anni.</p>
            </div>
            <div class="glass-card reveal">
                <h4 class="tech-font" style="color: var(--neon-green); font-size: 0.9rem;">Sistemi di Accumulo</h4>
                <p style="font-size: 0.85rem; color: #aaa; margin-top: 10px;">Batterie LFP di ultima generazione per l'indipendenza notturna.</p>
            </div>
            <div class="glass-card reveal">
                <h4 class="tech-font" style="color: var(--neon-green); font-size: 0.9rem;">Pratiche Chiavi in Mano</h4>
                <p style="font-size: 0.85rem; color: #aaa; margin-top: 10px;">Gestiamo noi ENEA, GSE e autorizzazioni comunali.</p>
            </div>
        </div>

        <div class="faq-container" style="margin-top: 80px; max-width: 800px; margin-left: auto; margin-right: auto;">
            <h2 class="tech-font reveal" style="text-align: center; font-size: 1.1rem; margin-bottom: 40px;">Domande Frequenti</h2>
            
            <div class="faq-item reveal" onclick="toggleFaq(this)">
                <div class="faq-question">Posso usufruire delle detrazioni fiscali? <span>+</span></div>
                <div class="faq-answer">S√¨, nel 2026 √® attiva la detrazione del 50%. Il nostro team gestisce tutta la burocrazia per te.</div>
            </div>

            <div class="faq-item reveal" onclick="toggleFaq(this)">
                <div class="faq-question">Quanto risparmio realmente in bolletta? <span>+</span></div>
                <div class="faq-answer">Un impianto ben dimensionato pu√≤ abbattere i costi fino al 75-80% se abbinato ad accumulo.</div>
            </div>
        </div>
    </div>

    <div id="bot-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
        <div id="bot-launcher" onclick="toggleBot()" style="width: 60px; height: 60px; background: var(--neon-blue); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 0 20px var(--neon-blue);">
            <span id="bot-icon" style="font-size: 1.5rem;">ü§ñ</span>
        </div>

        <div id="bot-window" style="display: none; width: 320px; height: 450px; background: #0a0a0a; border: 1px solid var(--neon-blue); border-radius: 15px; flex-direction: column; overflow: hidden; box-shadow: 0 0 30px rgba(0, 243, 255, 0.2);">
            <div style="background: var(--neon-blue); color: black; padding: 15px; font-family: 'Orbitron'; font-size: 0.8rem; font-weight: bold; display: flex; justify-content: space-between;">
                <span>SISTEMA ADR-1</span>
                <span onclick="toggleBot()" style="cursor: pointer;">X</span>
            </div>
            <div id="bot-messages" style="flex: 1; padding: 15px; overflow-y: auto; font-size: 0.85rem; display: flex; flex-direction: column; gap: 10px; color: #ccc;">
                <div style="background: #1a1a1a; padding: 10px; border-radius: 10px; border-left: 3px solid var(--neon-blue);">
                    Ciao! Sono l'assistente ADR. Vuoi sapere quanto puoi risparmiare con il fotovoltaico o gli incentivi 2026?
                </div>
            </div>
            <div id="bot-input-area" style="padding: 10px; border-top: 1px solid #222; display: flex; gap: 5px;">
                <input type="text" id="user-input" placeholder="Scrivi qui..." style="flex: 1; background: #111; border: 1px solid #333; color: white; padding: 8px; border-radius: 5px; outline: none;">
                <button onclick="botReply()" style="background: var(--neon-blue); border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold;">></button>
            </div>
        </div>
    </div>

    <footer style="margin-top: 100px; padding: 40px; border-top: 1px solid #111; text-align: center; background: rgba(0,0,0,0.5);">
        <p style="font-size: 0.6rem; color: #444;">¬© 2026 ADR SEREGNO - PROGETTAZIONE IMPIANTI CERTIFICATI</p>
    </footer>

    <script>
        // 1. Progress Bar & Scroll Reveal
        window.onscroll = function() {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = (winScroll / height) * 100;
            document.getElementById("progress-bar").style.width = scrolled + "%";
            reveal();
        };

        function reveal() {
            var reveals = document.querySelectorAll(".reveal");
            for (var i = 0; i < reveals.length; i++) {
                var windowHeight = window.innerHeight;
                var elementTop = reveals[i].getBoundingClientRect().top;
                if (elementTop < windowHeight - 100) {
                    reveals[i].classList.add("active");
                }
            }
        }

        // 2. FAQ Toggle
        function toggleFaq(element) {
            element.classList.toggle('active');
            const span = element.querySelector('span');
            span.innerText = element.classList.contains('active') ? "-" : "+";
        }

        // 3. Calcolatore Risparmio
        function calculateSavings() {
            const spesa = document.getElementById('calc-spesa').value;
            if(spesa > 0) {
                const totale = (spesa * 0.75) * 20;
                document.getElementById('calc-result').innerText = "‚Ç¨ " + totale.toLocaleString();
                addMessage(`Basandomi sulla tua spesa di ‚Ç¨${spesa}, il risparmio stimato in 20 anni √® di circa ‚Ç¨${totale.toLocaleString()}. Vuoi fissare un sopralluogo?`, false);
            }
        }

        // 4. Bot Logic
        let botStep = "base";
        function toggleBot() {
            const win = document.getElementById('bot-window');
            win.style.display = win.style.display === 'none' ? 'flex' : 'none';
        }

        function addMessage(text, isUser = false) {
            const msgDiv = document.createElement('div');
            msgDiv.style.cssText = `padding:10px; border-radius:10px; max-width:80%; align-self: ${isUser ? 'flex-end' : 'flex-start'}; background: ${isUser ? 'var(--neon-blue)' : '#1a1a1a'}; color: ${isUser ? 'black' : '#ccc'}; border-left: ${isUser ? 'none' : '3px solid var(--neon-blue)'}`;
            msgDiv.innerText = text;
            document.getElementById('bot-messages').appendChild(msgDiv);
            document.getElementById('bot-messages').scrollTop = document.getElementById('bot-messages').scrollHeight;
        }

        document.getElementById('user-input').addEventListener('keypress', (e) => { if(e.key === 'Enter') botReply(); });

        function botReply() {
            const input = document.getElementById('user-input');
            const text = input.value.trim().toLowerCase();
            if (!text) return;
            addMessage(input.value, true);
            input.value = "";

            setTimeout(() => {
                if (text.includes("costo") || text.includes("quanto costa")) {
                    addMessage("Un impianto medio da 3kW con ADR parte da circa ‚Ç¨5.500. Il prezzo finale dipende dalle batterie scelte. Ti interessa un preventivo?");
                } else if (text.includes("si") || text.includes("voglio") || text.includes("ok")) {
                    addMessage("Perfetto! Ti collego ad Andrea per scegliere la data del sopralluogo.");
                    setTimeout(() => contactAgent('Andrea', 'Fotovoltaico'), 1500);
                } else {
                    addMessage("Capisco. Ricorda che con gli incentivi 2026 recuperi la met√† della spesa! Posso aiutarti con altro?");
                }
            }, 1000);
        }

        // 5. WhatsApp Agenti
        function contactAgent(agente, servizio) {
            const numeri = { 'Daniel': '393423218269', 'Daniele': '393491795387', 'Luca': '393277545377', 'Andrea': '393515910955' };
            const testo = `Ciao ${agente}, vorrei richiedere un sopralluogo per ${servizio}.`;
            window.open(`https://wa.me/${numeri[agente]}?text=${encodeURIComponent(testo)}`, '_blank');
        }

        // Inizializza i reveal al caricamento
        window.onload = reveal;
    </script>
</body>
</html>
